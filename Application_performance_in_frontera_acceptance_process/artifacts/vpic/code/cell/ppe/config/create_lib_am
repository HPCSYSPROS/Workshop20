#! /bin/bash

echo "################################################################################"
echo "## VPIC library Makefile.am"
echo "## THIS FILE IS GENERATED BY config/bootstrap DO NOT EDIT"
echo "################################################################################"
echo

echo "lib_LTLIBRARIES = libvpic.la"
echo
echo "INCLUDES = -I@HOST_ACDIR@/src/include \\"
echo "   @EXTRA_CPPFLAGS@"
echo
echo "libvpic_includedir = \${includedir}"
echo
echo "libvpic_include_HEADERS = \\"

numfiles=`cat ../../config/vpic_header_list | wc -l`
cnt=1
for file in `cat ../../config/vpic_header_list` ; do
	if [ $cnt == $numfiles ] ; then
		echo "	@HOST_ACDIR@/$file"
	else
		echo "	@HOST_ACDIR@/$file \\"
	fi
	let cnt=$cnt+1
done

echo
echo "libvpic_la_SOURCES = \\"

numfiles=`cat ../../config/vpic_source_list | wc -l`
cnt=1
for file in `cat ../../config/vpic_source_list` ; do
	if [ $cnt == $numfiles ] ; then
		echo "	@HOST_ACDIR@/$file"
	else
		echo "	@HOST_ACDIR@/$file \\"
	fi
	let cnt=$cnt+1
done

echo
echo "if USE_CELL_SPUS"
echo "libvpic_la_SOURCES += \\"

numfiles=`cat ../../config/vpic_extra_source_list | wc -l`
cnt=1
for file in `cat ../../config/vpic_extra_source_list` ; do
	if [ $cnt == $numfiles ] ; then
		echo "	@HOST_ACDIR@/$file"
	else
		echo "	@HOST_ACDIR@/$file \\"
	fi
	let cnt=$cnt+1
done

echo "endif"

echo
echo "libvpic_la_LDFLAGS = @VERSION_INFORMATION@ \\"
echo "	@EXTRA_LDFLAGS@"
echo "libvpic_la_DEPENDENCIES = @EXTRA_O_FILES@"
echo "libvpic_la_LIBADD = @EXTRA_LO_FILES@ @EXTRA_LIBS@"
echo
echo "include @top_builddir@/config/rules.mk"
